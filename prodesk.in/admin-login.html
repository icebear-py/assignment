<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login – Prodesk</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f4f4f5; display: flex; align-items: center; justify-content: center; min-height: 100vh; }
  .card { background: #fff; border-radius: 16px; padding: 40px; width: 360px; box-shadow: 0 4px 24px rgba(0,0,0,0.08); }
  h1 { font-size: 22px; font-weight: 700; margin-bottom: 6px; }
  p { color: #666; font-size: 14px; margin-bottom: 28px; }
  label { display: block; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.4px; color: #444; margin-bottom: 6px; }
  input { width: 100%; padding: 12px 16px; border: 2px solid #eee; border-radius: 10px; font-size: 15px; outline: none; transition: border 0.2s; margin-bottom: 18px; }
  input:focus { border-color: #111; }
  button { width: 100%; padding: 14px; background: #111; color: #fff; border: none; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; transition: background 0.2s; }
  button:hover { background: #000; }
  .err { color: #dc2626; font-size: 13px; margin-top: -10px; margin-bottom: 14px; display: none; }
</style>
</head>
<body>
<div class="card">
  <h1>Prodesk Admin</h1>
  <p>Sign in to view form submissions</p>
  <label>Email</label>
  <input type="email" id="email" placeholder="ansh@gmail.com">
  <label>Password</label>
  <input type="password" id="pass" placeholder="••••••">
  <div class="err" id="err">Invalid credentials</div>
  <button id="btn" onclick="login()">Sign In</button>
</div>
<script>
  if (localStorage.getItem('prodesk-admin')) location.href = 'admin-dashboard.html';
  function login() {
    var btn = document.getElementById('btn');
    var err = document.getElementById('err');
    btn.textContent = 'Signing in...'; btn.disabled = true; err.style.display = 'none';
    fetch('http://localhost:5000/api/admin/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email: document.getElementById('email').value, password: document.getElementById('pass').value })
    })
    .then(function(r) { return r.json(); })
    .then(function(d) {
      if (d.success) { localStorage.setItem('prodesk-admin', d.token); location.href = 'admin-dashboard.html'; }
      else { err.style.display = 'block'; btn.textContent = 'Sign In'; btn.disabled = false; }
    })
    .catch(function() { err.textContent = 'Server error'; err.style.display = 'block'; btn.textContent = 'Sign In'; btn.disabled = false; });
  }
  document.addEventListener('keydown', function(e) { if (e.key === 'Enter') login(); });
</script>
</body>
</html>
